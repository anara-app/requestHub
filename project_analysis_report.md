# Анализ системы RequestHub - Система управления рабочими процессами

## Краткое описание
RequestHub - это корпоративная система управления рабочими процессами и заявками, разработанная на основе современного технологического стека. Система позволяет компаниям автоматизировать процессы согласования различных типов запросов через настраиваемые шаблоны workflow.

## Архитектура системы

### Технологический стек
- **Монорепозиторий**: Использует pnpm workspaces для управления зависимостями
- **Фронтенд (Админ-панель)**: React + Vite + TypeScript + MantineUI + React Router
- **Клиентская часть**: Next.js + React Query + shadcn/ui + tRPC
- **Бэкенд**: Node.js + Fastify + tRPC + Prisma + PostgreSQL
- **Аутентификация**: Supabase
- **Деплоймент**: Docker + PM2 + Nginx

### Структура проекта
```
requestHub/
├── packages/admin/     # Админ-панель на React
├── packages/server/    # API сервер на Node.js
└── packages/client/    # Клиентское приложение на Next.js (не активно используется)
```

## Основные функциональные возможности

### 1. Управление пользователями и ролями
- **Система ролей**: Гибкая система ролей с настраиваемыми разрешениями
- **Иерархия сотрудников**: Поддержка структуры подчинения (менеджер-подчиненный)
- **Профили пользователей**: Управление личными данными, аватарами, контактной информацией
- **Организационная структура**: Визуализация иерархии компании

### 2. Шаблоны рабочих процессов (Workflow Templates)
- **Создание шаблонов**: Конструктор для создания многоэтапных процессов согласования
- **Динамические назначения**: Автоматическое назначение ответственных на основе:
  - Ролей пользователей (CEO, HR, Финансовый менеджер, Юрист и др.)
  - Иерархических связей (например, непосредственный руководитель инициатора)
- **Архивирование**: Возможность архивирования неактуальных шаблонов с указанием причины
- **Аудит изменений**: Отслеживание кто, когда и что изменил в шаблоне

### 3. Конструктор динамических форм
- **Типы полей**: Поддержка 17+ типов полей (текст, число, дата, выпадающий список, файлы и др.)
- **Валидация**: Настраиваемые правила валидации для каждого поля
- **Условная логика**: Поля могут отображаться в зависимости от значений других полей
- **Настройка макета**: Гибкая система размещения полей в форме

### 4. Управление заявками
- **Жизненный цикл**: Статусы от черновика до финального согласования
- **Пошаговое согласование**: Автоматический переход между этапами
- **Комментарии**: Система комментариев на каждом этапе
- **Файловые вложения**: Поддержка загрузки и хранения файлов
- **Аудит**: Полная история всех действий с заявкой

### 5. Система согласований
- **Интеллектуальное назначение**: Автоматическое определение согласующих лиц
- **Эскалация**: Возможность передачи полномочий в иерархии
- **Массовые операции**: Групповое согласование однотипных заявок
- **Уведомления**: Push-уведомления и email-рассылки

### 6. Аналитика и отчетность
- **Дашборд**: Визуализация ключевых метрик
- **Тренды запросов**: Графики изменения количества заявок во времени
- **Производительность**: Анализ времени обработки заявок
- **Статистика по пользователям**: Активность сотрудников в системе

### 7. Галерея файлов
- **Централизованное хранение**: Управление всеми файлами системы
- **Поддержка форматов**: Изображения, видео, PDF, документы
- **Метаданные**: Сохранение информации о размерах, типах файлов
- **Интеграция**: Связь файлов с заявками и профилями

## Специализированные роли системы

Система поддерживает различные корпоративные роли:
- **Руководство**: CEO, менеджеры различных уровней
- **Специализированные отделы**: Юридический, закупки, финансы, HR, бухгалтерия
- **Безопасность**: Служба безопасности, охрана, промышленная безопасность
- **IT**: Автоматизация и информационные технологии

## Интернационализация
- **Мультиязычность**: Поддержка русского и английского языков
- **Локализация**: Система переводов на основе Lingui
- **Региональные настройки**: Адаптация под местные требования

## Безопасность и надежность
- **Аутентификация**: JWT-токены через Supabase
- **Авторизация**: Детальная система разрешений
- **Аудит**: Полное логирование всех действий пользователей
- **Валидация**: Строгая типизация с TypeScript и Zod-схемами

## Принцип работы

1. **Администратор** создает шаблоны workflow с определением этапов согласования
2. **Сотрудник** подает заявку, заполняя динамическую форму
3. **Система** автоматически определяет цепочку согласующих лиц
4. **Согласующие** получают уведомления и обрабатывают заявки по очереди
5. **Все действия** фиксируются в аудит-логе для отчетности и аналитики

Система идеально подходит для средних и крупных организаций, которым необходимо автоматизировать внутренние процессы согласования документов, закупок, отпусков, командировок и других корпоративных операций.